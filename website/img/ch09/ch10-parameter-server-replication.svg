<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!-- Created with Inkscape (http://www.inkscape.org/) -->

<svg
   version="1.1"
   id="svg2"
   xml:space="preserve"
   width="779.24609"
   height="442.80597"
   viewBox="0 0 779.24609 442.80597"
   sodipodi:docname="ch10-parameter-server-replication.svg"
   inkscape:version="1.1.1 (3bf5ae0d25, 2021-09-20)"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:svg="http://www.w3.org/2000/svg"><defs
     id="defs6"><clipPath
       clipPathUnits="userSpaceOnUse"
       id="clipPath18"><path
         d="M 0,0 H 609 V 342 H 0 Z"
         id="path16" /></clipPath></defs><sodipodi:namedview
     id="namedview4"
     pagecolor="#ffffff"
     bordercolor="#666666"
     borderopacity="1.0"
     inkscape:pageshadow="2"
     inkscape:pageopacity="0.0"
     inkscape:pagecheckerboard="0"
     showgrid="false"
     fit-margin-top="0"
     fit-margin-left="0"
     fit-margin-right="0"
     fit-margin-bottom="0"
     inkscape:zoom="0.78837719"
     inkscape:cx="331.69402"
     inkscape:cy="273.98053"
     inkscape:window-width="1920"
     inkscape:window-height="1137"
     inkscape:window-x="1912"
     inkscape:window-y="-8"
     inkscape:window-maximized="1"
     inkscape:current-layer="g8" /><g
     id="g8"
     inkscape:groupmode="layer"
     inkscape:label="ch10-parameter-server-replication"
     transform="matrix(1.3333333,0,0,-1.3333333,-16.622627,442.80598)"><g
       id="g10" /><g
       id="g22"><path
         d="M 16.5,278.3332 C 16.5,294.9939 30.00611,308.5 46.66674,308.5 H 532.3333 c 16.6606,0 30.1667,-13.5061 30.1667,-30.1668 V 157.6668 C 562.5,141.0061 548.9939,127.5 532.3333,127.5 H 46.66674 C 30.00611,127.5 16.5,141.0061 16.5,157.6668 Z"
         style="fill:#ededed;fill-opacity:1;fill-rule:nonzero;stroke:none"
         id="path24" /><g
         id="g26"
         transform="matrix(7.874016e-5,0,0,-7.874016e-5,16.5,308.5)"><path
           d="M 0,383117.9 C 0,171527.7 171527.6,0 383117.6,0 H 6551083 c 211590,0 383117,171527.7 383117,383117.9 V 1915582 c 0,211590 -171527,383118 -383117,383118 H 383117.6 C 171527.6,2298700 0,2127172 0,1915582 Z"
           style="fill:none;stroke:#2f528f;stroke-width:12700;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:8;stroke-dasharray:none;stroke-opacity:1"
           id="path28" /></g><path
         d="M 124.5,56.33316 C 124.5,62.50043 129.4996,67.5 135.6668,67.5 H 252.3332 C 258.5004,67.5 263.5,62.50043 263.5,56.33316 V 11.66684 C 263.5,5.499564 258.5004,0.4999987 252.3332,0.4999987 H 135.6668 c -6.1672,0 -11.1668,4.9995653 -11.1668,11.1668413 z"
         style="fill:#e2f0d9;fill-opacity:1;fill-rule:nonzero;stroke:none"
         id="path30" /><g
         id="g32"
         transform="matrix(7.874016e-5,0,0,-7.874016e-5,124.5,67.5)"><path
           d="M 0,141818.9 C 0,63494.5 63494.36,0 141818.6,0 H 1623481 c 78325,0 141819,63494.5 141819,141818.9 v 567262.2 c 0,78324.4 -63494,141818.9 -141819,141818.9 H 141818.6 C 63494.36,850900 0,787405.5 0,709081.1 Z"
           style="fill:none;stroke:#2f528f;stroke-width:12700;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:8;stroke-dasharray:none;stroke-opacity:1"
           id="path34" /></g><g
         id="g36"
         transform="translate(159.4874,-313)"><text
           transform="matrix(1,0,0,-1,0,342)"
           style="font-variant:normal;font-weight:normal;font-size:18px;font-family:Calibri;-inkscape-font-specification:Calibri;writing-mode:lr-tb;fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none"
           id="text40"><tspan
             x="0 16.0002 24.9984 30.990601 38.980801 47.979 53.971199 58.9734"
             y="0"
             sodipodi:role="line"
             id="tspan38">Worker 1</tspan></text></g><path
         d="m 224.5,168.8333 c 0,3.1296 2.5371,5.6667 5.6667,5.6667 h 127.6666 c 3.1296,0 5.6667,-2.5371 5.6667,-5.6667 v -22.6666 c 0,-3.1296 -2.5371,-5.6667 -5.6667,-5.6667 H 230.1667 c -3.1296,0 -5.6667,2.5371 -5.6667,5.6667 z"
         style="fill:#9dc3e6;fill-opacity:1;fill-rule:nonzero;stroke:none"
         id="path42" /><g
         id="g44"
         transform="matrix(7.874016e-5,0,0,-7.874016e-5,224.5,174.5)"><path
           d="M 0,71967.31 C 0,32220.86 32220.84,0 71967.25,0 H 1693333 c 39746,0 71967,32220.86 71967,71967.31 V 359832.7 c 0,39746.4 -32221,71967.3 -71967,71967.3 H 71967.25 C 32220.84,431800 0,399579.1 0,359832.7 Z"
           style="fill:none;stroke:#2f528f;stroke-width:12700;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:8;stroke-dasharray:none;stroke-opacity:1"
           id="path46" /></g><g
         id="g48"
         transform="translate(242.4272,-190)"><text
           transform="matrix(1,0,0,-1,0,342)"
           style="font-variant:normal;font-weight:normal;font-size:18px;font-family:Calibri;-inkscape-font-specification:Calibri;writing-mode:lr-tb;fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none"
           id="text52"><tspan
             x="0 7.9991999 17.006399 26.013599 35.020802 39.023998 48.0312 57.038399 61.041599 70.048798 79.056 87.055199 96.062401"
             y="0"
             sodipodi:role="line"
             id="tspan50">Load balancer</tspan></text></g><path
         d="m 61.5,276.1665 c 0,5.1548 4.17874,9.3335 9.33349,9.3335 H 192.1665 c 5.1548,0 9.3335,-4.1787 9.3335,-9.3335 v -37.333 c 0,-5.1548 -4.1787,-9.3335 -9.3335,-9.3335 H 70.83349 c -5.15475,0 -9.33349,4.1787 -9.33349,9.3335 z"
         style="fill:#deebf7;fill-opacity:1;fill-rule:nonzero;stroke:none"
         id="path54" /><g
         id="g56"
         transform="matrix(7.874016e-5,0,0,-7.874016e-5,61.5,285.5)"><path
           d="M 0,118535.3 C 0,53070.05 53070.05,0 118535.3,0 H 1659465 c 65465,0 118535,53070.05 118535,118535.3 v 474129.4 c 0,65465.3 -53070,118535.3 -118535,118535.3 H 118535.3 C 53070.05,711200 0,658130 0,592664.7 Z"
           style="fill:none;stroke:#2f528f;stroke-width:12700;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:8;stroke-dasharray:none;stroke-opacity:1"
           id="path58" /></g><g
         id="g60"
         transform="translate(104.388,-90)"><text
           transform="matrix(1,0,0,-1,0,342)"
           style="font-variant:normal;font-weight:normal;font-size:18px;font-family:Calibri;-inkscape-font-specification:Calibri;writing-mode:lr-tb;fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none"
           id="text64"><tspan
             x="0 10.0008 18.993601 27.986401 31.9932 36 44.0028"
             y="0"
             sodipodi:role="line"
             id="tspan62">Replica</tspan></text></g><path
         d="m 224.5,274.1664 c 0,5.1548 4.1788,9.3336 9.3336,9.3336 h 120.3329 c 5.1547,0 9.3335,-4.1788 9.3335,-9.3336 v -37.3328 c 0,-5.1548 -4.1788,-9.3336 -9.3335,-9.3336 H 233.8336 c -5.1548,0 -9.3336,4.1788 -9.3336,9.3336 z"
         style="fill:#deebf7;fill-opacity:1;fill-rule:nonzero;stroke:none"
         id="path66" /><g
         id="g68"
         transform="matrix(7.874016e-5,0,0,-7.874016e-5,224.5,283.5)"><path
           d="M 0,118536.2 C 0,53070.48 53070.43,0 118536.1,0 H 1646764 c 65466,0 118536,53070.48 118536,118536.2 v 474127.6 c 0,65465.7 -53070,118536.2 -118536,118536.2 H 118536.1 C 53070.43,711200 0,658129.5 0,592663.8 Z"
           style="fill:none;stroke:#2f528f;stroke-width:12700;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:8;stroke-dasharray:none;stroke-opacity:1"
           id="path70" /></g><g
         id="g72"
         transform="translate(266.4898,-92)"><text
           transform="matrix(1,0,0,-1,0,342)"
           style="font-variant:normal;font-weight:normal;font-size:18px;font-family:Calibri;-inkscape-font-specification:Calibri;writing-mode:lr-tb;fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none"
           id="text76"><tspan
             x="0 10.0008 18.993601 27.986401 31.9932 36 44.0028"
             y="0"
             sodipodi:role="line"
             id="tspan74">Replica</tspan></text></g><path
         d="m 386.5,274.1664 c 0,5.1548 4.1788,9.3336 9.3336,9.3336 h 120.3329 c 5.1547,0 9.3335,-4.1788 9.3335,-9.3336 v -37.3328 c 0,-5.1548 -4.1788,-9.3336 -9.3335,-9.3336 H 395.8336 c -5.1548,0 -9.3336,4.1788 -9.3336,9.3336 z"
         style="fill:#deebf7;fill-opacity:1;fill-rule:nonzero;stroke:none"
         id="path78" /><g
         id="g80"
         transform="matrix(7.874016e-5,0,0,-7.874016e-5,386.5,283.5)"><path
           d="M 0,118536.2 C 0,53070.48 53070.43,0 118536.1,0 H 1646764 c 65466,0 118536,53070.48 118536,118536.2 v 474127.6 c 0,65465.7 -53070,118536.2 -118536,118536.2 H 118536.1 C 53070.43,711200 0,658129.5 0,592663.8 Z"
           style="fill:none;stroke:#2f528f;stroke-width:12700;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:8;stroke-dasharray:none;stroke-opacity:1"
           id="path82" /></g><g
         id="g84"
         transform="translate(428.5915,-92)"><text
           transform="matrix(1,0,0,-1,0,342)"
           style="font-variant:normal;font-weight:normal;font-size:18px;font-family:Calibri;-inkscape-font-specification:Calibri;writing-mode:lr-tb;fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none"
           id="text88"><tspan
             x="0 10.0008 18.993601 27.986401 31.9932 36 44.0028"
             y="0"
             sodipodi:role="line"
             id="tspan86">Replica</tspan></text></g><path
         d="m 293.1229,141.6059 -4.8472,-3.5362 0.884,-1.2118 4.8472,3.5362 z m -8.4826,-6.1884 -4.8472,-3.5363 0.8841,-1.2118 4.8472,3.5363 z m -8.4825,-6.1884 -4.8472,-3.5363 0.8841,-1.2118 4.8471,3.5363 z m -8.4826,-6.1885 -4.8471,-3.5362 0.884,-1.2118 4.8472,3.5363 z m -8.4825,-6.1884 -4.8472,-3.5362 0.8841,-1.2118 4.8471,3.5362 z m -8.4825,-6.1884 -4.8472,-3.5362 0.884,-1.2118 4.8472,3.5362 z m -8.4826,-6.1884 -4.8472,-3.5363 0.8841,-1.21174 4.8472,3.53624 z m -8.4825,-6.18843 -4.8472,-3.53624 0.8841,-1.21179 4.8471,3.53624 z m -8.4826,-6.18842 -4.8471,-3.53624 0.884,-1.21179 4.8472,3.53624 z m -8.4825,-6.18842 -4.8472,-3.53624 0.8841,-1.21179 4.8471,3.53624 z m -8.4826,-6.18842 -4.8471,-3.53623 0.884,-1.21179 4.8472,3.53623 z m -8.4825,-6.18841 -2.2178,-1.61798 0.8841,-1.21179 2.2178,1.61797 z m -2.7359,0.78919 -3.079,-5.95981 6.6153,1.11265 z"
         style="fill:#4472c4;fill-opacity:1;fill-rule:nonzero;stroke:none"
         id="path90" /><path
         d="m 293.415,141.6247 4.9979,-3.3198 -0.83,-1.2495 -4.9979,3.3199 z m 8.7463,-5.8096 4.9978,-3.3199 -0.8299,-1.2494 -4.9979,3.3198 z m 8.7463,-5.8097 4.9978,-3.3198 -0.8299,-1.2495 -4.9979,3.3198 z m 8.7462,-5.8097 4.9979,-3.3198 -0.8299,-1.2495 -4.9979,3.3198 z m 8.7463,-5.8097 4.9979,-3.3198 -0.8299,-1.2495 -4.9979,3.3198 z m 8.7463,-5.8097 4.9979,-3.3198 -0.8299,-1.2495 -4.9979,3.3199 z m 8.7463,-5.8097 4.9979,-3.3198 -0.83,-1.2494 -4.9978,3.3198 z m 8.7463,-5.8096 4.9979,-3.31986 -0.83,-1.24947 -4.9978,3.31981 z m 8.7463,-5.80973 4.9979,-3.31982 -0.83,-1.24946 -4.9979,3.31981 z m 8.7463,-5.80968 4.9979,-3.31982 -0.83,-1.24946 -4.9979,3.31981 z m 8.7463,-5.80968 4.9979,-3.31982 -0.83,-1.24946 -4.9979,3.31981 z m 8.7463,-5.80968 4.9978,-3.31982 -0.8299,-1.24947 -4.9979,3.31982 z m 8.7463,-5.80969 0.2326,-0.15454 -0.8299,-1.24947 -0.2327,0.15454 z m 0.6447,2.2729 3.338,-5.81876 -6.6578,0.82088 z"
         style="fill:#4472c4;fill-opacity:1;fill-rule:nonzero;stroke:none"
         id="path92" /><path
         d="M 333.5,56.33316 C 333.5,62.50043 338.4996,67.5 344.6668,67.5 H 461.3332 C 467.5004,67.5 472.5,62.50043 472.5,56.33316 V 11.66684 C 472.5,5.499564 467.5004,0.4999987 461.3332,0.4999987 H 344.6668 c -6.1672,0 -11.1668,4.9995653 -11.1668,11.1668413 z"
         style="fill:#e2f0d9;fill-opacity:1;fill-rule:nonzero;stroke:none"
         id="path94" /><g
         id="g96"
         transform="matrix(7.874016e-5,0,0,-7.874016e-5,333.5,67.5)"><path
           d="M 0,141818.9 C 0,63494.5 63494.36,0 141818.6,0 H 1623481 c 78325,0 141819,63494.5 141819,141818.9 v 567262.2 c 0,78324.4 -63494,141818.9 -141819,141818.9 H 141818.6 C 63494.36,850900 0,787405.5 0,709081.1 Z"
           style="fill:none;stroke:#2f528f;stroke-width:12700;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:8;stroke-dasharray:none;stroke-opacity:1"
           id="path98" /></g><g
         id="g100"
         transform="translate(368.4054,-313)"><text
           transform="matrix(1,0,0,-1,0,342)"
           style="font-variant:normal;font-weight:normal;font-size:18px;font-family:Calibri;-inkscape-font-specification:Calibri;writing-mode:lr-tb;fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none"
           id="text104"><tspan
             x="0 16.0002 24.9984 30.990601 38.980801 47.979 53.971199 58.9734"
             y="0"
             sodipodi:role="line"
             id="tspan102">Worker 2</tspan></text></g><path
         d="M 132.8991,230.041 192.7311,75.30161 189.933,74.21968 130.1009,228.959 Z m 62.0891,-152.25834 -0.9513,-10.01723 -7.443,6.77145 z"
         style="fill:#4472c4;fill-opacity:1;fill-rule:nonzero;stroke:none"
         id="path106" /><path
         d="M 454.8242,227.9703 404.4274,75.3497 407.2761,74.40903 457.673,227.0297 Z M 402.049,77.71454 403.5,67.7574 l 7.0951,7.13512 z"
         style="fill:#4472c4;fill-opacity:1;fill-rule:nonzero;stroke:none"
         id="path108" /><g
         id="g110"
         transform="translate(11.1574,-258)"><text
           transform="matrix(1,0,0,-1,0,342)"
           style="font-variant:normal;font-weight:bold;font-size:18px;font-family:Arial;-inkscape-font-specification:Arial-BoldMT;writing-mode:lr-tb;fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none"
           id="text114"><tspan
             x="0 12.0006 22.9932 27.9918"
             y="0"
             sodipodi:role="line"
             id="tspan112">Pull</tspan></text></g><g
         id="g116"
         transform="translate(49.1574,-258)"><text
           transform="matrix(1,0,0,-1,0,342)"
           style="font-variant:normal;font-weight:normal;font-size:18px;font-family:Arial;-inkscape-font-specification:ArialMT;writing-mode:lr-tb;fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none"
           id="text120"><tspan
             x="0 10.0008 25.0056 35.006401 45.007198 55.007999 65.008797 69.015602 79.016403 89.017197 94.014 99.010803 109.0116 119.0124 123.0192"
             y="0"
             sodipodi:role="line"
             id="tspan118">embedding table</tspan></text></g><g
         id="g122"
         transform="translate(426.6187,-256)"><text
           transform="matrix(1,0,0,-1,0,342)"
           style="font-variant:normal;font-weight:bold;font-size:18px;font-family:Arial;-inkscape-font-specification:Arial-BoldMT;writing-mode:lr-tb;fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none"
           id="text126"><tspan
             x="0 12.0006 22.9932 27.9918"
             y="0"
             sodipodi:role="line"
             id="tspan124">Pull</tspan></text></g><g
         id="g128"
         transform="translate(464.6187,-256)"><text
           transform="matrix(1,0,0,-1,0,342)"
           style="font-variant:normal;font-weight:normal;font-size:18px;font-family:Arial;-inkscape-font-specification:ArialMT;writing-mode:lr-tb;fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none"
           id="text132"><tspan
             x="0 10.0008 25.0056 35.006401 45.007198 55.007999 65.008797 69.015602 79.016403 89.017197 94.014 99.010803 109.0116 119.0124 123.0192"
             y="0"
             sodipodi:role="line"
             id="tspan130">embedding table</tspan></text></g><g
         id="g134"
         transform="translate(193.866,-158)"><text
           transform="matrix(1,0,0,-1,0,342)"
           style="font-variant:normal;font-weight:normal;font-size:18px;font-family:Arial;-inkscape-font-specification:ArialMT;writing-mode:lr-tb;fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none"
           id="text138"><tspan
             x="0 12.9996 21.999599 32.000401 42.001202 57.000599 61.000198 70.000198 80.000999 84.000603 88.000198 97.000198 102.0006 111.0006 121.0014 131.0022 141.00301 150.00301 160.0038 165.0042 171.0036 181.00439 191.0052 195.00481 199.00439 208.00439 218.0052"
             y="0"
             sodipodi:role="line"
             id="tspan136">Dynamically choose replica </tspan></text></g><g
         id="g140"
         transform="translate(162.2196,-23)"><text
           transform="matrix(1,0,0,-1,0,342)"
           style="font-variant:normal;font-weight:normal;font-size:18px;font-family:Arial;-inkscape-font-specification:ArialMT;writing-mode:lr-tb;fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none"
           id="text144"><tspan
             x="0 12.0006 22.0014 28.000799 38.001598 53.000999 63.001801 68.002197 78.002998 84.002403 89.0028 101.0034 111.0042 117.0036 126.0036 136.00439 142.0038 147.0042 160.0038 170.00459 180.0054 184.005 188.00459 197.00459 207.0054 212.0058 216.0054 226.0062 236.007 241.0074 255.0078 261.0072 271.008 281.00879"
             y="0"
             sodipodi:role="line"
             id="tspan142">Parameter Server Replication Group</tspan></text></g></g></g></svg>
